
<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <title>æ”¶æ“šä¸Šå‚³è¾¨è­˜å·¥å…·</title>
  <style>
    body { font-family: "Microsoft JhengHei", sans-serif; padding: 2em; }
    .success { color: green; font-weight: bold; }
    .error { color: red; font-weight: bold; }
  </style>
</head>
<body>
  <h1>ğŸ§¾ æ”¶æ“šä¸Šå‚³è¾¨è­˜å·¥å…·</h1>
  <input type="file" id="fileInput" />
  <button onclick="uploadFile()">ğŸ“¤ ä¸Šå‚³è¾¨è­˜</button>
  <p id="statusMsg"></p>

  <script>
    async function uploadFile() {
      const fileInput = document.getElementById("fileInput");
      const statusMsg = document.getElementById("statusMsg");
      if (!fileInput.files.length) {
        statusMsg.innerHTML = "â— è«‹å…ˆé¸æ“‡åœ–ç‰‡æª”æ¡ˆã€‚";
        statusMsg.className = "error";
        return;
      }

      const file = fileInput.files[0];
      const formData = new FormData();
      formData.append("file", file);

      try {
        const res = await fetch("https://guruguru.app.n8n.cloud/webhook/upload-receipt", {
          method: "POST",
          headers: {
            "X-TOKEN": "MY_SECURE_TOKEN_Boos58609225*"
          },
          body: formData
        });

        if (!res.ok) throw new Error("å›å‚³éŒ¯èª¤ï¼š" + res.status);
        const result = await res.json();
        statusMsg.innerHTML = `âœ… ä¸Šå‚³æˆåŠŸï¼Œå›æ‡‰ï¼š${JSON.stringify(result)}`;
        statusMsg.className = "success";
      } catch (error) {
        statusMsg.innerHTML = `âŒ éŒ¯èª¤ï¼š${error.message}`;
        statusMsg.className = "error";
      }
    }
  </script>
</body>
</html>
