
<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <title>收據上傳辨識工具</title>
  <style>
    body { font-family: "Microsoft JhengHei", sans-serif; padding: 2em; }
    .success { color: green; font-weight: bold; }
    .error { color: red; font-weight: bold; }
  </style>
</head>
<body>
  <h1>🧾 收據上傳辨識工具</h1>
  <input type="file" id="fileInput" />
  <button onclick="uploadFile()">📤 上傳辨識</button>
  <p id="statusMsg"></p>

  <script>
    async function uploadFile() {
      const fileInput = document.getElementById("fileInput");
      const statusMsg = document.getElementById("statusMsg");
      if (!fileInput.files.length) {
        statusMsg.innerHTML = "❗ 請先選擇圖片檔案。";
        statusMsg.className = "error";
        return;
      }

      const file = fileInput.files[0];
      const formData = new FormData();
      formData.append("file", file);

      try {
        const res = await fetch("https://guruguru.app.n8n.cloud/webhook/upload-receipt", {
          method: "POST",
          headers: {
            "X-TOKEN": "MY_SECURE_TOKEN_Boos58609225*"
          },
          body: formData
        });

        if (!res.ok) throw new Error("回傳錯誤：" + res.status);
        const result = await res.json();
        statusMsg.innerHTML = `✅ 上傳成功，回應：${JSON.stringify(result)}`;
        statusMsg.className = "success";
      } catch (error) {
        statusMsg.innerHTML = `❌ 錯誤：${error.message}`;
        statusMsg.className = "error";
      }
    }
  </script>
</body>
</html>
